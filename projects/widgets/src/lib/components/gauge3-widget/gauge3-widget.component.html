<!-- Square -->
<div #gauge3Ref class="gauge3 h-100 w-100" [ngClass]="widget.config?.class" [ngStyle]="widget.config?.styles"
    (resized)="onResized($event)" [class]="'mode_square'" [hidden]="!(mode == 1)">
    <div class="display_center d-flex justify-content-center align-items-center">
        <i *ngIf="canActivate('faCenter')" [class]="getThresholdIconByRange()?.icon" [style]="{'color': getThresholdIconByRange()?.color}"></i>
    </div>
    <div [style.color]="widget.config?.colorText">
        <ng-container [ngTemplateOutlet]="gaugeTemplate" [ngTemplateOutletContext]="{ cloneConfig: widget.config }"></ng-container>
    </div>
</div>

<!-- Rectangle -->
<div class="gauge3 h-100 w-100" [ngClass]="widget.config?.class" [ngStyle]="widget.config?.styles"
    (resized)="onResized($event)" [class]="'mode_rectangle'" [hidden]="!(mode == 2)">
    <div class="h-100 w-100 d-flex justify-content-center align-items-center">
        <div class="col-6 p-0 text-center">
            <i *ngIf="canActivate('faCenter')" [class]="getThresholdIconByRange()?.icon" [style]="{'color': getThresholdIconByRange()?.color}"></i>
            <ng-container [ngTemplateOutlet]="gaugeTemplate" [ngTemplateOutletContext]="{ cloneConfig: widget.config }"></ng-container>
        </div>
        <div class="col-6">
            <p class="center_variable mb-1" [style.color]="widget.config?.colorText">{{widget.config?.value}}{{widget.config?.centerVariable}}</p>
            <p class="button_variable mb-0" [style.color]="widget.config?.colorText">{{widget.config?.bottomVariable}}</p>
        </div>
    </div>
</div>

<!-- Vertical -->
<div class="gauge3 h-100 w-100" [ngClass]="widget.config?.class" [ngStyle]="widget.config?.styles"
    (resized)="onResized($event)" [class]="'mode_vertical'" [hidden]="!(mode == 3)">
    <div class="row w-100 m-0 h-50 gauge_container">
        <div class="icon_container">
            <i *ngIf="canActivate('faCenter')" [class]="getThresholdIconByRange()?.icon" [style]="{'color': getThresholdIconByRange()?.color}"></i>
        </div>
        <ng-container [ngTemplateOutlet]="gaugeTemplate" [ngTemplateOutletContext]="{ cloneConfig: widget.config }"></ng-container>
    </div>
    <div class="row w-100 m-0 h-50 d-flex justify-content-center align-items-center">
        <div class="content">
            <div [style.color]="widget.config?.colorText">{{widget.config?.value}}{{widget.config?.centerVariable}}</div>
            <div [style.color]="widget.config?.colorText">{{widget.config?.bottomVariable}}</div>
        </div>
    </div>
</div>

<!-- Util -->
<ng-template #gaugeTemplate let-cloneConfig="cloneConfig">
    <div [class]="'gauge_' + widget?.config?.type">
        <ngx-gauge
            [thick]="cloneConfig?.thick"
            [foregroundColor]="cloneConfig?.foregroundColor"
            [backgroundColor]="cloneConfig?.thresholdColor ? convertHexOpacity(getThresholdColorByRange()?.color) : convertHexOpacity(widget.config?.foregroundColor)"
            [min]="cloneConfig?.gaugeMin" 
            [max]="cloneConfig?.gaugeMax" 
            [type]="cloneConfig?.type" 
            [value]="cloneConfig?.value" 
            [thresholds]="cloneConfig?.thresholdColor ? cloneConfig.thresholdColor : {}"
            [label]="cloneConfig?.bottomVariable" 
            [append]="cloneConfig?.centerVariable">
        </ngx-gauge>
    </div>
</ng-template>