<div id="mysite">
  <app-header [mode]="2" [background]="'white'"></app-header>
  <div class="main">
    <div class="row">
      <div class="col-lg-12 col-xs-12">
          <a [routerLink]="[ '/mysite' ]" [queryParams]="{ page: 'my-project' }" class="linked">My Project</a>
          <i class="feather-chevron-right"></i>
          <strong class="linkto" style="font-weight: normal;">Search Result</strong>
      </div>
      <div class="col-lg-12 col-xs-12 project-name">
          <span>"Project"</span>
      </div>
  </div>

    <!-- my project -->

    <ng-template [ngIf]="type === 1">
      <div class="grid-project">
        <div class="view-type">
          <span>{{ itemProjects.length }} Results</span>

          <p style="font-size:16px">
            View by
            <i [style.color]="isList === true ? '#0000e8e6':'#c4c4c4'"
              [style.pointerEvents]="isList === true ? 'none' : 'visible'" class="feather-grid"
              style="font-size: 1.7rem;" (click)="toggle()"></i>
            <i [style.color]="isList === false ? '#0000e8e6':'#c4c4c4'"
              [style.pointerEvents]="isList === false ? 'none' : 'visible'" class="feather-list"
              style="font-size: 1.7rem;" (click)="toggle()"></i>
          </p>

        </div>
        <ng-template [ngIf]="isList">
          <div class="grid__container">
            <div class="row">
              <div *ngFor="let item of returnedSliceItemProjects" class="col-12 col-sm-4 col-md-4 col-lg-4 grid__card">
                <button [style.color]="item.status == 1 ? '#0000e8e6':'#c4c4c4'"
                [style.pointerEvents]="item.status != 1 ? 'none' : 'visible'" class="grid__card--edit">
                  <i class="far fa-edit"></i> Edit Site
                </button>
                <div class="grid__card--content">
                  <h5 class="site--name">{{item.name}}</h5>
                  <p class="site--time">
                    Last on {{item.time}}
                  </p>
                  <div class="site--control">
                    <div class="control-status" dropdown>
                      <div id="status-basic" dropdownToggle class="">

                        <ng-template [ngIf]="item.status === 1">
                          <div class="d-flex align-items-center" style="color: #9dcb7a">
                            <span class="material-icons">
                              fiber_manual_record
                            </span>
                            Draft</div>
                        </ng-template>
                        <ng-template [ngIf]="item.status === 0">
                          <div class="d-flex align-items-center" style="color: orange">
                            <span class="material-icons">
                              fiber_manual_record
                            </span>
                            Pending</div>
                        </ng-template>
                      </div>
                   
                    </div>
                    <a href="/" class="control-view">
                      <i class="feather-eye" style="font-size: 1.2rem; padding-right: 5px;">
                      </i>
                      Preview Site
                    </a>
                    <ng-template [ngIf]="item.status === 1">
                      <div class="control-extend">
                        <div class="btn-group" dropdown>
                          <span id="button-basic" dropdownToggle class="material-icons three-dots">
                            more_vert
                          </span>
                          <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu"
                            aria-labelledby="button-basic">

                            <!-- fix tiennx -->
                            <li role="menuitem">
                              <a class="dropdown-item" href="javascript:void(0)"><i class="feather-send">
                                </i>Publish Site</a>
                            </li>

                            <!-- end -->
                            <li role="menuitem">
                              <a class="dropdown-item" href="javascript:void(0)"><i class="feather-plus-circle">
                                </i>Duplicate</a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" href="/detail"><i class="feather-edit">
                                </i>
                                Rename</a>
                            </li>

                            <li role="menuitem">
                              <a class="dropdown-item" href="javascript:void(0)"><i class="feather-trash-2">
                                </i>Delete</a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </ng-template>
                    <ng-template [ngIf]="item.status !== 1">
                      <div class="control-extend">
                        <div class="btn-group" dropdown>
                          <span id="button-basic" dropdownToggle class="material-icons three-dots">
                            more_vert
                          </span>
                          <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu"
                            aria-labelledby="button-basic">

                            <li role="menuitem">
                              <a class="dropdown-item" href="/"><i class="feather-rotate-ccw"></i>
                                Unpublished</a>
                            </li>

                            <li role="menuitem">
                              <a class="dropdown-item" href="javascript:void(0)"><i class="feather-trash-2">
                                </i>Delete</a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>

            </div>
            <div class="paginate">
              <pagination 
                (pageChanged)="pageChangedProjects($event)"
                [totalItems]="itemProjects.length"
                [maxSize]="5"
                [(ngModel)]="currentPageProjects"
                [itemsPerPage]="12"
                [boundaryLinks]="true"
                [customPreviousTemplate]="prevTemplate"
                [customNextTemplate]="nextTemplate"
                [customPageTemplate]="pageTemplate">
              </pagination>
              <ng-template #pageTemplate let-page let-disabled="disabled" let-currentPage="currentPage">
                <span [class.font-weight-bold]="page.number === currentPage">{{ page.number }}</span>
              </ng-template>
              
              <ng-template #nextTemplate let-disabled="disabled" let-currentPage="currentPage">
                <ng-container *ngIf="!disabled">
                  <i class="feather-arrow-right"></i>
                </ng-container>
                <ng-container *ngIf="disabled">
                  <i class="feather-arrow-right"></i>
                </ng-container>
              </ng-template>
              
              <ng-template #prevTemplate let-disabled="disabled" let-currentPage="currentPage">
                <ng-container *ngIf="!disabled">
                  <i class="feather-arrow-left"></i>
                </ng-container>
                <ng-container *ngIf="disabled">
                  <i class="feather-arrow-left"></i>
                </ng-container>
              </ng-template>
            </div>
          </div>
        </ng-template>
        <ng-template [ngIf]="!isList">
          <table class="table">
            <thead>
              <th>Project Name</th>
              <th>Last Updated</th>
              <th>Status</th>
              <th colspan="4">Modified</th>
            </thead>

            <tbody>
              <tr *ngFor="let itemList of returnedSliceItemProjects">
                <td>{{itemList.name}}</td>
                <td>{{itemList.time}}</td>
                <td>

                  <ng-template [ngIf]="itemList.status === 1">
                    <span style="color: #9dcb7a">Draft</span>
                  </ng-template>
                  <ng-template [ngIf]="itemList.status === 0">
                    <span style="color: orange">Pending</span>
                  </ng-template>

                </td>
                <td class="list__edit"
                  [style.color]="itemList.status !== 1 ? 'rgba(0, 0, 232, 0.5)' : ' rgba(0, 0, 232, 1)' "
                  [style.pointerEvents]="itemList.status? 'none' : 'visible' ">Edit Site</td>
                <td class="list__preview">Preview Site</td>
                <td [style.color]="itemList.status !== 1 ? 'rgba(0, 0, 232, 0.5)' : ' rgba(0, 0, 232, 1)' "
                  [style.pointerEvents]="itemList.status !== 1 ? 'none' : 'visible' ">
                  Publish
                </td>
                <td class="list__publish">
                  <ng-template [ngIf]="itemList.status === 1">
                    <div class="control-extend">

                      <div class="btn-group" dropdown>
                        <span id="button-basic" dropdownToggle class="material-icons three-dots">
                          more_vert
                        </span>
                        <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu"
                          aria-labelledby="button-basic">
                          <li role="menuitem">
                            <a class="dropdown-item" href="/"><i class="feather-plus-circle"></i>
                              Duplicate</a>
                          </li>
                          <li role="menuitem">
                            <a class="dropdown-item" href="/"><i class="feather-edit"></i>
                              Rename</a>
                          </li>

                          <li role="menuitem">
                            <a class="dropdown-item" href="javascript:void(0)"><i class="feather-trash-2">
                              </i>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </ng-template>
                  <ng-template [ngIf]="itemList.status !== 1">
                    <div class="control-extend">
       
                      <div class="btn-group" dropdown>
                        <span id="button-basic" dropdownToggle class="material-icons three-dots">
                          more_vert
                        </span>
                        <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu"
                          aria-labelledby="button-basic">

                          <li role="menuitem">
                            <a class="dropdown-item" href="#myModal" data-toggle="modal">

                              <i class="feather-rotate-ccw"></i>Unpublished</a>
                          </li>

                          <li role="menuitem">
                            <a class="dropdown-item" href="javascript:void(0)"><i class="feather-trash-2">
                              </i>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </ng-template>
                </td>

              </tr>

            </tbody>
          </table>
          <div class="paginate">
            <pagination 
              (pageChanged)="pageChangedProjects($event)"
              [totalItems]="itemProjects.length"
              [maxSize]="5"
              [(ngModel)]="currentPageProjects"
              [itemsPerPage]="12"
              [boundaryLinks]="true"
              [customPreviousTemplate]="prevTemplate"
              [customNextTemplate]="nextTemplate"
              [customPageTemplate]="pageTemplate">
            </pagination>
            <ng-template #pageTemplate let-page let-disabled="disabled" let-currentPage="currentPage">
              <span [class.font-weight-bold]="page.number === currentPage">{{ page.number }}</span>
            </ng-template>
            
            <ng-template #nextTemplate let-disabled="disabled" let-currentPage="currentPage">
              <ng-container *ngIf="!disabled">
                <i class="feather-arrow-right"></i>
              </ng-container>
              <ng-container *ngIf="disabled">
                <i class="feather-arrow-right"></i>
              </ng-container>
            </ng-template>
            
            <ng-template #prevTemplate let-disabled="disabled" let-currentPage="currentPage">
              <ng-container *ngIf="!disabled">
                <i class="feather-arrow-left"></i>
              </ng-container>
              <ng-container *ngIf="disabled">
                <i class="feather-arrow-left"></i>
              </ng-container>
            </ng-template>
          </div>
        </ng-template>
      </div>
    </ng-template>
  </div>
  <app-footer></app-footer>
</div>

<!-- MyModal -->
<div id="myModal" class="modal " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title" id="myModalLabel">
          Unpublished
        </h1>
      </div>
      <div class="modal-body model-bd">
        <p id="text1"> Do you want to unpublished </p>
        <p id="text2"> this project ? </p>
      </div>
      <div class="modal-footer model-ft">
        <button type="button" class="btn btn-delete1" data-dismiss="modal" data-toggle="modal"
          data-target="#openModal2">Unpublished</button>
        <button type="button" class="btn btn-primary btn-cancel1" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>